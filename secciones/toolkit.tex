%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Toolkit de desarrollo cambiar Kit de desarrollo

\section{Kit de desarrollo de software.}\label{kit:kit-de-desarrollo}

Tal como se ha descrito en la sección \nameref{modelado:modelado-del-software} del presente documento, ya que el objetivo está encaminado hacia la \emph{flexibilidad en la creación y edición de los contenidos}, es necesario desacoplar lo más posible los elementos narrativos y de jugabilidad, de la programación.

Concretamente, se propone en primera instancia que todos estos elementos se trabajen desde hojas de cálculo o planillas en Google Sheets o similar, y desde allí se exporten a \lsc{JSON}, \lsc{CSV} o \lsc{XML}. Estos archivo serán convertidos a escenas (archivos \href{https://docs.godotengine.org/es/stable/development/file_formats/tscn.html}{\lsc{TSCN}}) o scripts (archivos \href{https://docs.godotengine.org/es/stable/development/file_formats/gdscript_grammar.html}{\lsc{GDS}cript}) e importados dentro de Godot. Dado que la \lsc{IDE} de Godot permite exponer variables o miembros de una clase en el propio Editor de propiedades a través de la keyword \textbf{export}, estos elementos de diseño podrían ajustarse fácilmente tanto desde este panel como de su planilla. Esto abre posibilidades de error pues por ejemplo si la velocidad de un enemigo se ajusta desde el panel dentro de Godot, estos valores no serán reflejados en la planilla correspondiente. Si a esto agregamos la enorme cantidad personajes, misiones, texto, etc. del contenido del juego, se hace evidente la necesidad de construir software específico tanto para automatizar la importación a Godot, como para mantener un control de estos elementos editados.

A continuación se presenta una propuesta de aplicaciones sencillas que faciliten todo este trabajo. Considérese que es una propuesta inicial y se debe estudiar la externalización o no de determinados contenidos una vez se haya escrito y depurado la base del código. Así, cuando comience la etapa de la implementación de contenidos ---que a nivel de desarrollo se estima la que implica más trabajo---, estas herramientas ya van a estar disponibles.

Recordar también en cuanto a la implementación que los textos de contenidos deben corresponder a la codificación UTF-8.\footnote{Al parecer la codificación de los archivos \lsc{TSCN} debe ser \lsc{US}-\lsc{ASCII}. Investigar y testear esto antes de implementar la exportación a estos archivos.}

\subsection{Elementos narrativos.}\label{kit:elementos-narrativos}

\subsubsection{Textos varios.}\label{kit:textos-varios}
Se consideran textos como diarios, descripciones y pensamientos. Son elementos sencillos, básicamente strings. Como tal la transformación puede ser sencillamente a un nodo en Godot. Quizás el nombre del archivo podría indicar el tipo (entrada del diario, descripción, etc.). 

\subsubsection{Fichas de personaje.}\label{kit:fichas-de-personaje}
Además de servir para el proceso de traducción, es probable que ciertos strings como nombres, descripciones o incluso stats de altura y peso sean usados directamente por el software. Por lo mismo es importante tener un formato unificado al respecto. En este sentido quizás sea necesaria una herramienta específica que controle estos templates de personajes en base al funcionamiento de las escenas para poder importar sus strings (por ejemplo el nombre o pseudónimo del personaje en distintos idiomas).

\subsubsection{Cutscenes y diálogos.}\label{kit:cutscenes-y-dialogos}
Básicamente es una hoja de cálculo. En la primera columna está el comando y en las siguientes los datos necesarios para que se ejecute. Probablemente deba transformarse a un archivo \lsc{GDS}cript con una colección de strings.

Dentro de los comandos de la tabla de cutscenes, existe el de \textbf{dialog}. Junto a este comando en la siguiente columna está el personaje hablante, luego la “emoción” que indica qué sprite usar del personaje y finalmente la línea de texto en si.

\subsubsection{Quests.}\label{kit:quests}
Esto va a depender de la implementación de QuestManager y Quest, pero a nivel de diseño de juego probablemente se trabajen en guiones o scripts similares a los de las cutscenes con comandos específicos en base a una planilla. Probablemente dentro de Godot debieran transformarse a nodos, archivos \lsc{GDS}cript o escenas \lsc{TSCN}.

\subsection{Elementos de mecánicas de jugabilidad.}\label{kit:elementos-de-mecanicas}
Todo lo relativo a las mecánicas o sistemas del juego, vale decir a qué velocidad se mueven los personajes, qué tipo de IA deben manifestar, cuanto daño produce la combinación de determinada armadura y arma, el área de efecto, etc.

\subsubsection{Estadísticas del jugador.}\label{kit:estadisticas-del-jugador}
Extraído de la planilla con los stats de personajes o de una hoja de cálculo general con todos los valores.

\subsubsection{Armas, equipamiento e ítems.}\label{kit:armas-equipamiento-items}
Muy probablemente tablas con stats. Un elemento por cada fila y un stat por cada columna. Estas planillas debieran poder exportarse y actualizarse de forma automática en Godot.

\subsubsection{Personajes.}\label{kit:personajes}
Stats que se extraen de la ficha del personaje, o de una hoja de cálculo que contenga los stats de todos los personajes. Ver \nameref{kit:fichas-de-personaje}.

\subsubsection{Locaciones o niveles.}\label{kit:locaciones-o-niveles}
Quizás se pueda generar una escena base desde una planilla de texto, para editar en Godot.

\subsection{Traducción.}
Además de los elementos de jugabilidad y narrativos ya descritos, quizás sea muy útil disponer de software específico para la l10n del contenido del juego que permita por un lado, un seguimiento o control de strings y assets ya traducidos y los por traducir, en base a criterios de relevancia y límites de strings, dimensión o similares; y por otro lado la generación de informes con todo el material y documentación del transfondo de todo el mundo de Bakumapu. Así se conseguirá mejorar la calidad de la traducción y dinamizar el proceso con él o los equipos encargados de manera considerable.

Descripción detallada: como va a funcionar esto qué deberia entrar y que salir. Y una idea de como preparar el material de input pera que este programa o script sepa qué interpretar y generar estos documentos de traducción.

\subsection{Lineamientos del software del Kit.}
Para todas estas herramientas se propone utilizar Python, por su similitud con \lsc{GDS}cript y por la disponibilidad multiplataforma. Para la mayoría solo será necesario una batería de scripts, no obstante por ejemplo para los que use directamente el equipo de traducción, se propone el uso de una \lsc{GUI} en Qt5 (PyQt5) por su fácil manejo y compatibilidad entre sistemas.